<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mass Intention Tracking System</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .stats-bar {
            background: #f8f9fa;
            padding: 20px;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            min-width: 150px;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4facfe;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9em;
        }
        
        .nav-tabs {
            display: flex;
            background: #f8f9fa;
            overflow-x: auto;
            border-bottom: 1px solid #ddd;
        }
        
        .nav-tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            color: #666;
            white-space: nowrap;
            transition: all 0.3s ease;
        }
        
        .nav-tab:hover {
            background: #e9ecef;
        }
        
        .nav-tab.active {
            background: #4facfe;
            color: white;
        }
        
        .tab-content {
            display: none;
            padding: 30px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
        }
        
        tr:hover {
            background: #f8f9fa;
        }
        
        .month-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            text-align: center;
            font-size: 1.5em;
            font-weight: 600;
        }
        
        .special-day {
            background: #fff3cd !important;
            color: #856404;
        }
        
        .personal-intention {
            background: #d1ecf1 !important;
            color: #0c5460;
        }
        
        .deceased-mass {
            background: #f8d7da !important;
            color: #721c24;
        }
        
        .export-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            margin: 10px;
            transition: transform 0.2s ease;
        }
        
        .export-btn:hover {
            transform: translateY(-2px);
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .summary-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .summary-card h3 {
            margin-top: 0;
            color: #4facfe;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Mass Intention Tracking System</h1>
            <p>MSFS - Missionaries of St. Francis de Sales</p>
        </div>
        
        <div class="stats-bar">
            <div class="stat-card">
                <div class="stat-number" id="totalMasses">300</div>
                <div class="stat-label">Total Intentions</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="celebratedMasses">0</div>
                <div class="stat-label">Celebrated</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="missedMasses">33</div>
                <div class="stat-label">Missed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="remainingMasses">267</div>
                <div class="stat-label">Remaining</div>
            </div>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('overview')">Overview</button>
            <button class="nav-tab" onclick="showTab('january')">January</button>
            <button class="nav-tab" onclick="showTab('february')">February</button>
            <button class="nav-tab" onclick="showTab('march')">March</button>
            <button class="nav-tab" onclick="showTab('april')">April</button>
            <button class="nav-tab" onclick="showTab('may')">May</button>
            <button class="nav-tab" onclick="showTab('june')">June</button>
            <button class="nav-tab" onclick="showTab('july')">July</button>
            <button class="nav-tab" onclick="showTab('august')">August</button>
            <button class="nav-tab" onclick="showTab('september')">September</button>
            <button class="nav-tab" onclick="showTab('october')">October</button>
            <button class="nav-tab" onclick="showTab('november')">November</button>
            <button class="nav-tab" onclick="showTab('december')">December</button>
            <button class="nav-tab" onclick="showTab('deceased')">Deceased Confreres</button>
            <button class="nav-tab" onclick="showTab('personal')">Personal Intentions</button>
        </div>
        
        <div id="overview" class="tab-content active">
            <h2>Mass Celebration Overview</h2>
            <div class="summary-grid">
                <div class="summary-card">
                    <h3>Calculation Summary</h3>
                    <p><strong>Start Date:</strong> August 23, 2023</p>
                    <p><strong>End Date:</strong> June 29, 2024</p>
                    <p><strong>Total Days:</strong> <span id="totalDays">311</span></p>
                    <p><strong>Good Friday (No Mass):</strong> March 29, 2024</p>
                    <p><strong>Masses Celebrated:</strong> <span id="calculatedMasses">277</span></p>
                    <p><strong>Masses Missed:</strong> 33</p>
                </div>
                
                <div class="summary-card">
                    <h3>Special Observances</h3>
                    <p><strong>SFS Feast Day:</strong> January 24</p>
                    <p><strong>Good Friday:</strong> No Mass Celebrated</p>
                    <p><strong>Personal Intentions:</strong> 3 per month</p>
                    <p><strong>Deceased Confreres:</strong> As per notifications</p>
                </div>
                
                <div class="summary-card">
                    <h3>Progress Status</h3>
                    <div style="background: #e9ecef; border-radius: 10px; padding: 5px; margin: 10px 0;">
                        <div style="background: linear-gradient(90deg, #4facfe, #00f2fe); height: 20px; border-radius: 5px; width: 92.3%;"></div>
                    </div>
                    <p>92.3% Complete (277/300 intentions)</p>
                </div>
            </div>
            
            <button class="export-btn" onclick="exportToExcel()">Export to Excel</button>
            <button class="export-btn" onclick="printReport()">Print Report</button>
        </div>
        
        <!-- Monthly tabs will be generated by JavaScript -->
        <div id="january" class="tab-content"></div>
        <div id="february" class="tab-content"></div>
        <div id="march" class="tab-content"></div>
        <div id="april" class="tab-content"></div>
        <div id="may" class="tab-content"></div>
        <div id="june" class="tab-content"></div>
        <div id="july" class="tab-content"></div>
        <div id="august" class="tab-content"></div>
        <div id="september" class="tab-content"></div>
        <div id="october" class="tab-content"></div>
        <div id="november" class="tab-content"></div>
        <div id="december" class="tab-content"></div>
        
        <div id="deceased" class="tab-content">
            <div class="month-header">Masses for Deceased Confreres</div>
            <p><em>As per MSFS Constitution 118 and General Directory No. 98</em></p>
            <table id="deceasedTable">
                <thead>
                    <tr>
                        <th>Date of Receipt</th>
                        <th>Date of Death</th>
                        <th>Name of Deceased</th>
                        <th>When Celebrated</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        
        <div id="personal" class="tab-content">
            <div class="month-header">Personal Intention Masses</div>
            <p><em>Three personal intentions per month as per regulations</em></p>
            <table id="personalTable">
                <thead>
                    <tr>
                        <th>Month</th>
                        <th>Mass I Date</th>
                        <th>Mass II Date</th>
                        <th>Mass III Date</th>
                        <th>Remarks</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <script>
        // Mass data structure
        const massData = {
            startDate: new Date('2023-08-23'),
            endDate: new Date('2024-06-29'),
            totalIntentions: 300,
            missedMasses: 33,
            currentSerial: 300
        };

        // Personal intention dates
        const personalIntentions = {
            "2024-01-18": "Gladwin's Birthday Mass",
            "2024-01-27": "My Ordination Anniversary",
            "2024-02-16": "Dominic's Birthday Mass",
            "2024-03-02": "Paritosh Birthday Mass",
            "2024-03-16": "Shlok's Birthday",
            "2024-03-27": "Shrawiya's Birthday",
            "2024-05-04": "Sophie Birthday Mass",
            "2024-07-01": "Eshban's Birthday",
            "2024-07-07": "Random Personal Intention",
            "2024-08-16": "Sr Synthia's Birthday",
            "2024-08-27": "Dada's Death Anniversary",
            "2024-09-07": "Daddy's Birthday Mass",
            "2024-09-11": "Random Personal Intention",
            "2024-09-17": "Theodore's Birthday Mass",
            "2024-11-12": "Anaya's Birthday Mass",
            "2024-11-20": "Carmel's Birthday Mass",
            "2024-12-01": "Sr. Sherly's Birthday",
            "2024-12-18": "Mummy's Death Anniversary Mass",
            "2024-12-20": "Seeba's Birthday"
        };

        // Deceased confreres data
        const deceasedConfreres = [
            {receipt: "2020-03-15", death: "2020-03-15", name: "Fr. Daniel Afonso", celebrated: "2020-03-16"},
            {receipt: "2021-01-04", death: "2021-01-04", name: "Bro. Raphael Xalao", celebrated: "2021-01-05"},
            {receipt: "2021-01-22", death: "2021-01-22", name: "Fr. Alwyn Zonthanzanga", celebrated: "2021-01-23"},
            {receipt: "2021-03-27", death: "2021-03-27", name: "Fr. Joseph Salvador Denis", celebrated: "2021-03-28"},
            {receipt: "2021-04-01", death: "2021-04-01", name: "Bro. Mathew Thudianplackal", celebrated: "2021-04-02"},
            {receipt: "2021-05-12", death: "2021-05-12", name: "Fr. Rijo Francis Mechery", celebrated: "2021-05-13"},
            {receipt: "2021-05-17", death: "2021-05-17", name: "Fr. Joseph Edacherry Pauvath", celebrated: "2021-05-18"},
            {receipt: "2021-06-08", death: "2021-06-08", name: "Fr. Thomas Vazhayil", celebrated: "2021-06-09"},
            {receipt: "2021-06-09", death: "2021-06-09", name: "Fr. Anish Mundiyanickal", celebrated: "2021-06-10"},
            {receipt: "2021-08-05", death: "2021-08-05", name: "Fr. Sean Fleury", celebrated: "2021-08-06"},
            {receipt: "2021-08-30", death: "2021-08-30", name: "Fr. Varghese Puthuparampil", celebrated: "2021-08-31"},
            {receipt: "2021-08-30", death: "2021-08-30", name: "Fr. Devasia Ayalukkunnel", celebrated: "2021-08-31"},
            {receipt: "2021-11-27", death: "2021-11-27", name: "Fr. Augustine Olickal", celebrated: "2021-11-28"},
            {receipt: "2021-12-12", death: "2021-12-12", name: "Bro. Michael Olickal", celebrated: "2021-12-13"},
            {receipt: "2022-01-15", death: "2022-01-15", name: "Fr. Claude Morel", celebrated: "2022-01-16"},
            {receipt: "2022-01-16", death: "2022-01-16", name: "Fr. Sushant Mantri", celebrated: "2022-01-17"},
            {receipt: "2022-01-30", death: "2022-01-30", name: "Fr. Emile Mayoraz", celebrated: "2022-01-31"},
            {receipt: "2022-03-17", death: "2022-03-17", name: "Fr. Mathew Alapatt", celebrated: "2022-03-18"},
            {receipt: "2022-03-31", death: "2022-03-31", name: "Fr. Philip Souriamkuzhy", celebrated: "2022-04-01"},
            {receipt: "2022-05-18", death: "2022-05-18", name: "Fr. Sudhir John Kullu", celebrated: "2022-05-19"},
            {receipt: "2022-06-26", death: "2022-06-26", name: "Fr. Sebastian Kuzhupuil", celebrated: "2022-06-27"},
            {receipt: "2022-08-08", death: "2022-08-08", name: "Fr. Mathew Mannukuzhumpil", celebrated: "2022-08-09"},
            {receipt: "2022-10-16", death: "2022-10-16", name: "Fr. Ganji Bala Joji", celebrated: "2022-10-17"},
            {receipt: "2022-10-20", death: "2022-10-20", name: "Fr. Francis Stephen", celebrated: "2022-10-21"},
            {receipt: "2022-11-10", death: "2022-11-10", name: "Fr. Tomy Thekkel", celebrated: "2022-11-11"},
            {receipt: "2022-11-13", death: "2022-11-13", name: "Fr. Thomas Kizhakkayil", celebrated: "2022-11-14"},
            {receipt: "2022-12-02", death: "2022-12-02", name: "Fr. Noel Rebello", celebrated: "2022-12-03"},
            {receipt: "2023-01-24", death: "2023-01-24", name: "Fr. Reddy Joseph", celebrated: "2023-01-25"},
            {receipt: "2023-03-11", death: "2023-03-11", name: "Fr. Bernard Caszo", celebrated: "2023-03-12"},
            {receipt: "2023-03-24", death: "2023-03-24", name: "Fr. Cyriac Velikkettel", celebrated: "2023-03-25"},
            {receipt: "2023-03-24", death: "2023-03-24", name: "Fr. Aloysius Kuzhuppallil", celebrated: "2023-03-25"},
            {receipt: "2023-03-29", death: "2023-03-29", name: "Bro. George Ettackakunnel", celebrated: "2023-03-30"},
            {receipt: "2023-04-15", death: "2023-04-15", name: "Fr. Abba M'toudjiel", celebrated: "2023-04-16"},
            {receipt: "2023-04-30", death: "2023-04-30", name: "Fr. Jerry Misquith", celebrated: "2023-05-01"},
            {receipt: "2023-06-06", death: "2023-06-06", name: "Fr. Cyriac Nellikunnel", celebrated: "2023-06-07"},
            {receipt: "2023-08-15", death: "2023-08-15", name: "Fr. Joseph Pulickal", celebrated: "2023-08-16"},
            {receipt: "2023-08-18", death: "2023-08-18", name: "Fr. Saji Tharayil", celebrated: "2023-08-19"},
            {receipt: "2023-09-10", death: "2023-09-10", name: "Fr. Francis Xavier Narisetty", celebrated: "2023-09-11"},
            {receipt: "2023-10-27", death: "2023-10-27", name: "Fr. Lucien Gurliat", celebrated: "2023-10-28"},
            {receipt: "2023-11-10", death: "2023-11-10", name: "Fr. Peregrino Da'silva", celebrated: "2023-11-11"},
            {receipt: "2024-01-12", death: "2024-01-12", name: "Fr. Mariadas Sesetti", celebrated: "2024-01-13"},
            {receipt: "2024-02-14", death: "2024-02-14", name: "Fr. Joseph Charles Pednekar", celebrated: "2024-02-15"},
            {receipt: "2024-05-02", death: "2024-05-02", name: "Fr. Jose Puthiyaparambil", celebrated: "2024-05-03"},
            {receipt: "2024-05-23", death: "2024-05-23", name: "Steffen", celebrated: "2024-05-23"},
            {receipt: "2024-06-24", death: "2024-06-24", name: "Bro. Malapuram Thomas", celebrated: "2024-06-25"}
        ];

        // Initialize the application
        function init() {
            calculateMassStats();
            generateMonthlyTables();
            populateDeceasedTable();
            populatePersonalTable();
        }

        function calculateMassStats() {
            const startDate = massData.startDate;
            const endDate = massData.endDate;
            const totalDays = Math.floor((endDate - startDate) / (1000 * 60 * 60 * 24)) + 1;
            const goodFridayAdjustment = 1; // Good Friday 2024
            const totalMassesToCelebrate = totalDays - goodFridayAdjustment;
            const celebratedMasses = totalMassesToCelebrate - massData.missedMasses;
            
            document.getElementById('totalDays').textContent = totalDays;
            document.getElementById('calculatedMasses').textContent = celebratedMasses;
            document.getElementById('celebratedMasses').textContent = celebratedMasses;
            document.getElementById('remainingMasses').textContent = massData.totalIntentions - celebratedMasses;
        }

        function generateMonthlyTables() {
            const months = [
                'january', 'february', 'march', 'april', 'may', 'june',
                'july', 'august', 'september', 'october', 'november', 'december'
            ];
            
            const monthNames = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];

            months.forEach((month, index) => {
                const container = document.getElementById(month);
                const monthName = monthNames[index];
                const daysInMonth = getDaysInMonth(index + 1, 2024);
                
                let html = `
                    <div class="month-header">${monthName.toUpperCase()}</div>
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Serial No.</th>
                                <th>Date of Receipt</th>
                                <th>From Whom</th>
                                <th>Intentions</th>
                                <th>Remarks</th>
                            </tr>
                        </thead>
                        <tbody>
                `;
                
                for (let day = 1; day <= daysInMonth; day++) {
                    const dateStr = `2024-${String(index + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const serialNo = getSerialNumber(dateStr);
                    const remarks = getRemarks(dateStr, index + 1, day);
                    const rowClass = getRowClass(dateStr, index + 1, day);
                    
                    html += `
                        <tr class="${rowClass}">
                            <td>${day}</td>
                            <td>${serialNo}</td>
                            <td>23-08-2023</td>
                            <td>Provincial Superior</td>
                            <td>General Intention</td>
                            <td>${remarks}</td>
                        </tr>
                    `;
                }
                
                html += `
                        </tbody>
                    </table>
                `;
                
                container.innerHTML = html;
            });
        }

        function getDaysInMonth(month, year) {
            return new Date(year, month, 0).getDate();
        }

        function getSerialNumber(dateStr) {
            const date = new Date(dateStr);
            const startDate = massData.startDate;
            
            if (date < startDate) return '';
            
            const daysDiff = Math.floor((date - startDate) / (1000 * 60 * 60 * 24));
            const serial = massData.currentSerial - daysDiff;
            
            return serial > 0 ? serial : '';
        }

        function getRemarks(dateStr, month, day) {
            // Good Friday 2024 - March 29
            if (month === 3 && day === 29) {
                return 'Good Friday - No Mass';
            }
            
            // SFS Feast Day - January 24
            if (month === 1 && day === 24) {
                return 'SFS Feast Day Mass Celebrated';
            }
            
            // Personal intentions
            if (personalIntentions[dateStr]) {
                return personalIntentions[dateStr];
            }
            
            // Deceased confreres
            const deceased = deceasedConfreres.find(d => d.celebrated === dateStr);
            if (deceased) {
                return `Mass for ${deceased.name}`;
            }
            
            return '';
        }

        function getRowClass(dateStr, month, day) {
            if (month === 3 && day === 29) return 'special-day'; // Good Friday
            if (month === 1 && day === 24) return 'special-day'; // SFS Feast Day
            if (personalIntentions[dateStr]) return 'personal-intention';
            
            const deceased = deceasedConfreres.find(d => d.celebrated === dateStr);
            if (deceased) return 'deceased-mass';
            
            return '';
        }

        function populateDeceasedTable() {
            const tbody = document.querySelector('#deceasedTable tbody');
            deceasedConfreres.forEach(deceased => {
                const row = tbody.insertRow();
                row.innerHTML = `
                    <td>${deceased.receipt}</td>
                    <td>${deceased.death}</td>
                    <td>${deceased.name}</td>
                    <td>${deceased.celebrated}</td>
                `;
            });
        }

        function populatePersonalTable() {
            const tbody = document.querySelector('#personalTable tbody');
            const personalByMonth = {
                'January': ['18', '', '27'],
                'February': ['16', '', ''],
                'March': ['2', '16', '27'],
                'April': ['', '', ''],
                'May': ['4', '', ''],
                'June': ['', '', ''],
                'July': ['1', '7', ''],
                'August': ['', '16', '27'],
                'September': ['7', '11', '17'],
                'October': ['', '', ''],
                'November': ['12', '20', ''],
                'December': ['1', '18', '20']
            };
            
            const personalRemarks = {
                'January': 'Gladwin\'s Birthday; My Ordination Anniversary',
                'February': 'Dominic\'s Birthday',
                'March': 'Paritosh\'s Birthday; Shlok\'s Birthday; Shrawiya\'s Birthday',
                'April': '',
                'May': 'Sophie\'s Birthday',
                'June': '',
                'July': 'Eshban\'s Birthday',
                'August': 'Sr Synthia\'s Birthday; Dada\'s Death Anniversary',
                'September': 'Daddy\'s Birthday; Theodore\'s Birthday; Mummy\'s Birthday',
                'October': '',
                'November': 'Anaya\'s Birthday; Carmel\'s Birthday',
                'December': 'Sr. Sherly\'s Birthday; Mummy\'s Death Anniversary; Seeba\'s Birthday'
            };
            
            Object.keys(personalByMonth).forEach(month => {
                const row = tbody.insertRow();
                const masses = personalByMonth[month];
                row.innerHTML = `
                    <td>${month}</td>
                    <td>${masses[0]}</td>
                    <td>${masses[1]}</td>
                    <td>${masses[2]}</td>
                    <td>${personalRemarks[month]}</td>
                `;
            });
        }

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remove active class from all nav tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked nav tab
            event.target.classList.add('active');
        }

        function exportToExcel() {
            alert('Excel export functionality would be implemented here. This would generate a comprehensive Excel workbook with all 15 sheets as specified.');
        }

        function printReport() {
            window.print();
        }

        // Initialize the application when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
